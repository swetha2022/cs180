<!DOCTYPE html>
<html>
<head>
  <title>Project 3: Image Warping and Mosaicing</title>
  <style>
    body {
      font-family: Georgia, serif;
      margin: 30px;
      line-height: 1.6;
    }
    h1, h2, h3 {
      text-align: center;
    }
    .flex-center {
      display: flex;
      justify-content: center;
      align-items: flex-end; 
      gap: 20px;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    figure {
      margin: 0;
      width: 20%;
    }
    figure img {
      width: 100%;
      border-radius: 8px;
      box-shadow: 0px 2px 8px rgba(0,0,0,0.2);
    }
    figcaption {
      font-size: 13px;
      text-align: center;
      margin-top: 6px;
    }
    p {
      text-align: justify;
    }
    code {
      background: #eee;
      padding: 2px 5px;
      border-radius: 4px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h1>Project 3: Image Warping and Mosaicing</h1>
  <h3>Webpage Link: <a href="https://swetha2022.github.io/cs180/3/index.html">https://swetha2022.github.io/cs180/3/index.html</a></h3>

  <h2>Introduction</h2>
  <p>
    In this project, I explored the use of projective transformations and image warping to create image mosaics. The process involved capturing photographs with projective relationships between them, computing homographies from point correspondences across each pair of images, performing inverse warping using nearest neighbor and bilinear interpolation, and blending the warped images into mosaics. 
  </p>

  <!-- ====================== PART A.1 ====================== -->
  <h2>A.1: Shoot the Pictures</h2>
  <p>
    Below are two sets of images that I captured by rotating the camera around a fixed center of projection.
  </p>

  <h3>Captured Photographs:</h3>

  <div class="flex-center">
    <figure><img src="outside1.jpg"><figcaption>Set 1: Image 1</figcaption></figure>
    <figure><img src="outside2.jpg"><figcaption>Set 1: Image 2</figcaption></figure>
  </div>

  <div class="flex-center">
    <figure><img src="hmmb1.jpg"><figcaption>Set 2: Image 1</figcaption></figure>
    <figure><img src="hmmb2.jpg"><figcaption>Set 2: Image 2</figcaption></figure>
  </div>

  <div class="flex-center">
    <figure><img src="books1.jpg"><figcaption>Set 3: Image 1</figcaption></figure>
    <figure><img src="books2.jpg"><figcaption>Set 3: Image 2</figcaption></figure>
  </div>

  <div class="flex-center">
    <figure><img src="apt1.png"><figcaption>Set 4: Image 1</figcaption></figure>
    <figure><img src="apt2.png"><figcaption>Set 4: Image 2</figcaption></figure>
  </div>

  <!-- ====================== PART A.2 ====================== -->
  <h2>A.2: Recover Homographies</h2>
  <p>
    To align the images, I computed the homography matrix <code>H</code> that maps points from one image to another. Given correspondences <code>p' = Hp</code>, the homography is estimated using least-squares from an overdetermined system of equations <code>Ah = b</code>. Below are visualizations of manually selected correspondences on two sets of images, the constructed systems of equations, and the resulting homography matrices.
  </p>

  <h3>Homography Estimation Results:</h3>
  <div class="flex-center">
    <figure><img src="outside_points1.png"><figcaption>Set 1: Image 1 Correspondences</figcaption></figure>
    <figure><img src="outside_points2.png"><figcaption>Set 1: Image 2 Correspondences</figcaption></figure>
    <figure><img src="system_of_equations.png"><figcaption>Set 1: Linear System of Equations</figcaption></figure>
    <figure><img src="outside_H.png"><figcaption>Set 1: Recovered Homography H</figcaption></figure>
  </div>

  <div class="flex-center">
    <figure><img src="apt_points1.png"><figcaption>Set 2: Image 1 Correspondences</figcaption></figure>
    <figure><img src="apt_points2.png"><figcaption>Set 2: Image 2 Correspondences</figcaption></figure>
    <figure><img src="system_of_equations.png"><figcaption>Set 2: Linear System of Equations</figcaption></figure>
    <figure><img src="apt_H.png"><figcaption>Set 2: Recovered Homography H</figcaption></figure>
  </div>


  <!-- ====================== PART A.3 ====================== -->
  <h2>A.3: Warp the Images</h2>
  <p>
    I implemented image warping using homographies and explored two interpolation methods: <b>nearest neighbor</b> and <b>bilinear interpolation</b>. Nearest neighbor interpolation rounds mapped coordinates to the nearest pixel value, while bilinear interpolation uses a weighted average of the four neighboring pixels for smoother results. Below are results demonstrating image rectification and a comparison between the two interpolation methods. Nearest neighbor interpolation is faster but produces jagged edges and aliasing, whereas bilinear interpolation is slower but yields smoother, higher-quality warps.
  </p>

  <h3>Rectification Results:</h3>
  <div class="flex-center">
    <figure><img src="notebook.jpg"><figcaption>Original Image</figcaption></figure>
    <figure><img src="notebook_rectified_nn.jpg"><figcaption>Rectified Result (Nearest Neighbor)</figcaption></figure>
    <figure><img src="notebook_rectified_bilinear.jpg"><figcaption>Rectified Result (Bilinear)</figcaption></figure>

  </div>

  <div class="flex-center">
    <figure><img src="ipad.jpg"><figcaption>Original Image</figcaption></figure>
    <figure><img src="ipad_rectified_nn.jpg"><figcaption>Rectified Result (Nearest Neighbor)</figcaption></figure>
    <figure><img src="ipad_rectified_bilinear.jpg"><figcaption>Rectified Result (Bilinear)</figcaption></figure>
  </div>

  <!-- ====================== PART A.4 ====================== -->
  <h2>A.4: Blend the Images into a Mosaic</h2>
  <p>
    Finally, I created mosaics from the photographs I took using homographies, interpolation, and alpha blending. I used alpha blending to minimize visible seams and “ghosting” artifacts. For each mosaic, one image was chosen as the reference, and the other image was transformed into its coordinate system using warping with bilinear interpolation. To accommodate both images in a single output, I first computed the bounding box of all corner points after transformation to determine the size of the final mosaic canvas. This ensured that both images fit entirely within the canvas. Once both images were placed onto the mosaic canvas, I generated alpha masks for each image using a distance-based approach: the mask was strongest (value 1) near the center of the image and fell off smoothly to 0 at the edges. These alpha masks were then used to perform weighted averaging at each pixel, blending overlapping regions according to their relative alpha values. Pixels near the center of an image contributed more heavily, while edge pixels were faded out to reduce visible seams. This procedure allowed both images to merge naturally on the canvas, producing a single coherent mosaic with smooth transitions and minimal artifacts.
  </p>

  <h3>Mosaic Results:</h3>
  <div class="flex-center">
    <figure><img src="outside1.jpg"><figcaption>Source 1 (Mosaic 1)</figcaption></figure>
    <figure><img src="outside2.jpg"><figcaption>Source 2 (Mosaic 1)</figcaption></figure>
    <figure><img src="outside_mosaic.jpg"><figcaption>Mosaic 1 Result</figcaption></figure>
  </div>

  <div class="flex-center">
    <figure><img src="hmmb1.jpg"><figcaption>Source 1 (Mosaic 2)</figcaption></figure>
    <figure><img src="hmmb2.jpg"><figcaption>Source 2 (Mosaic 2)</figcaption></figure>
    <figure><img src="hmmb_mosaic.jpg"><figcaption>Mosaic 2 Result</figcaption></figure>
  </div>

  <div class="flex-center">
    <figure><img src="books1.jpg"><figcaption>Source 1 (Mosaic 3)</figcaption></figure>
    <figure><img src="books2.jpg"><figcaption>Source 2 (Mosaic 3)</figcaption></figure>
    <figure><img src="books_mosaic.jpg"><figcaption>Mosaic 3 Result</figcaption></figure>
  </div>

  <div class="flex-center">
    <figure><img src="apt1.png"><figcaption>Source 1 (Mosaic 3)</figcaption></figure>
    <figure><img src="apt2.png"><figcaption>Source 2 (Mosaic 3)</figcaption></figure>
    <figure><img src="apt_mosaic.jpg"><figcaption>Mosaic 3 Result</figcaption></figure>
  </div>

</body>
</html>